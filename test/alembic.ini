#=========================================================
# Основные настройки alembic
#=========================================================

# Слова в квадратных скобках - это названия секций, для которых применяюся настройки
[alembic]

# Путь к папке с миграциями. Нужна, чтобы alembic понимал где брать версии.
# %(here)s указывает на директорию в которой лежит alembic.ini
# alembic.ini должна лежать в корневом каталоге, так же как и папка alembic
script_location = %(here)s/alembic

# Добавляем путь в sys.path для того, чтобы python видел модули
# . указывает текущую директорию
prepend_sys_path = .

# Чтобы указать несколько путей для sys.path или еще куда то в alembic нужно использовать разделитель.
# Пример для Windows "prepend_sys_path = ./app;./libs". Разделитель ";"
# Чтобы alembic понимал, как разделять пути нужно писать эту строчку.
# Вместо os можно писать разделитель напрямую, то есть = ";" или как нибудь иначе
# os обозначает, что разделитель подбирает под OC.
# На Windows = ";", на Linux, macOS = ":"
path_separator = os

#=========================================================
# Логгеры
#=========================================================

# Логгер это объект, который пишет сообщения о работе программы(Ошибки, успехи)
[loggers]

# Это список логгеров
keys = root,sqlalchemy,alembic

#=========================================================
# Обработчики
#=========================================================

# Обработчик это объект, который отвечает за то, куда отправляется лог-сообщение.
[handlers]
# Это список обработчиков. ЭТО НЕ МЕСТО КУДА ОТПРАВЛЯЕТСЯ, А ОБЪЕКТ КОТОРЫЙ ОТПРАВЛЯЕТ
keys = console

#=========================================================
# Форматтеры
#=========================================================

# Форматтер это объект, который определяет как будет выглядеть лог-сообщение
[formatters]
# Это список форматтеров.
keys = generic

#=========================================================
# Конкретные логгеры
#=========================================================

# Глобальный логгер
[logger_root]

# Эта строка говорит о том, что он пишет только предупреждения и ошибки
# Есть еще INFO и DEBUG ERROR CRITICAL
# level - WARNING означает, что будет выводится предупреждения и выше по уровню
# DEBUG <- INFO <- WARNING <- ERROR <- CRITICAL. От меньшего к большему
level = WARNING
# Эта строка говорит о том какой обработчик занимается этим логгером
handlers = console
# Это имя логгера, оно может быть любым, но для root никогда не указывается
# По этому имени можно обращаться к логеру
qualname =

# Логер SQLAlchemy 
[logger_sqlalchemy]

# Запросы БД не будут видны, только важные предупреждения
level = WARNING
# Если обработчик не указан, то он будет таким же как у root
handlers =
qualname = sqlalchemy.engine

# Логгер Alembic
[logger_alembic]
# Будут видны обычные сообщения (например, “Running upgrade")
level = INFO
handlers =
qualname = alembic

#=========================================================
# Конкретные обработчики
#=========================================================

# Обработчик console
[handler_console]

# Это тип обработчика, есть много разновидностей.
# Этот выводит в stdout или stdeer
class = StreamHandler
# Это аргументы, которые передаются классу. В данном случае мы передаем ему stdeer
# Это значит, что он будет использовать для вывода только stdeer и не будет stdout
# Так как это кортеж, а не строка, то запятая после аргумента обязательна
args = (sys.stderr,)
# C помощью этой переменной можно задать уровень сообщения, который обработчик выведет
# Схема такая же как и с логерами. В нашем случае стоит NOTSET, что значит, что он принимает всё.
level = NOTSET
# Тут указывается объект-форматтер, который будет форматировать сообщения данного обработчика
formatter = generic

#=========================================================
# Конкретные форматтеры
#=========================================================

# Форматтер generic
[formatter_generic]

# Форматирование строки. levelname это название уровня, который мы задавали ранее
# name это имя логера. message - сообщение которое он написал.
# Тут используется старое форматирование с помощью format.
format = %(levelname)-5.10s [%(name)s] %(message)s
# Форматирование времени
datefmt = %H:%M:%S
